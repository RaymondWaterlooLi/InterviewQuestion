- Why no restrictions on server side but they are on the client side?
>Because of `cookies` then we need to restrict the scripts on the client side, since cookies is sent with request
>It is a way to protect web applications from reading personalized contents.


- `script src` could bypass same-origin policy

<h3> First </h3>

> JSON has potients to inset malware, since `eval` function is js
> Instead, you should use `jQuery` or `Prototype`

<h3> Second </h3>

- Using `<script src>` is essentially using `eval` 

- script is useless if there is not JSONP mechanism

- Instead, developers would use `JSONP`, data is wrapped in a JS function call

- Against serving data in JSONP form, except for the data is completely public 

<h3> Third </h3>

Another way to communicate accross origins is to use `<frame>,<frameset>, <iframe>` that opens view to other websites
Ex:
<blockquote>

If `foo.siteA.com` and `bar.siteA.com` are different origins, but they could loser their domain to `siteA.com`

If you lower the domain, it could be raised back.
</blockquote>

<h3> Fourth </h3>

- Flash could also across communicate by using a crossdomain.xml file to set the rules of whom can cross

<h3> Fifth </h3>

- `XMLHttpRequest` object allows client-side script code to make requests to other web broswers, by AJAX calls
- It uses cross-origin resource sharing (CORS)
- Will not send user's cookies or authentication information along with its request

<h3> Sixth </h3>

- XDomainRequest only allows allowed if ther server responds with an appropriate "Access-Control-Allow-Origin" header
- Will not send user's cookies or authentication information along with its request
-  Much safer to use than others, available after IE8 

-------------------------------

<h2> Runtime Encryption </h2>

1. Encrypting data all the times, the encryption keys are secured inside `intel SGX` secure enclaves.

2. `EnclaveOS` : a runtime environment for applications to allow them to run inside SGX enclaves
3. `Enclave Manager`:  a managment software which provides visibility into the running enclaves and establishes trust between enclaves using the remote asttestation capabilities of intel SGX

`EnclaveOS` does not modify applications, and it goes with `libraries`,  `Encrypted File System`,  `System call Interface`. 

Create an environment not accessible to any application regarless of its privilege level. 

CPU derives the key and performs encryption and decryption of memory without using any support from any of the software. 

EnclaveOS encrypt all data which may get written out to the memory (DRAM), to system storage and to the network.

A memory encryption key is randomly generated by the processor on every boot and is used by the precessor to encrypt and decrypt Intel. Only used by hardware. 

Wriiten to system storage: A data seal key is used for this. Derived from base key using a key derivation function (KDF). 

KDF = identity of the application + the identity of the signer (obtained from cyptographic hash of the public portion of the key used to sign the enclave)

Use `TLS` keys (generated by the application) to write data to the network. 
At rest, the TLS key is encrypted with one of the application's data sealing key prior to being stored in system storage. 

Process within a container can communicate by using the usual IPC mechanism (pipes, unix domain sockets, shared memory).

Process in different container could talk via IP sockets.
If the same file system is mounted into multiple containers, they could talk via files. 

Communication btw processes in the same EnclaveOS appliucation is secured using these shared keys.

Communication btw different applications is via TLS. 

The application node sends an attestation to Enclave Manager, which verifies the attestation with the Intel Attestation service to confirm that the application node is a genuine intel SGX machine. Once confirmed, Enclave Manager can provision a secret with FQPE such that future requests for attesting EnclaveOS application can be satistfied by the Enclave Manager, and no need to contact Intel for future attestation.


A container conversion tool is provided to convert an existing Docker container image into an SGX capable container image. This inserts EnclaveOS into an SGX capable container image and stes the required paramtes to run the original application on EnclaveOS. 

